<div class="flex min-h-screen w-full bg-white">
  <!-- Left Side: Form Section -->
  <div
    class="relative flex min-h-screen w-full flex-col items-center justify-center bg-white bg-geometria bg-size-[275px_275px] bg-repeat p-6 sm:p-12 lg:min-h-0 lg:w-1/2 lg:p-12 xl:p-24"
  >
    <!-- Return Button -->
    <div class="absolute top-6 left-6 z-20">
      <app-return-button></app-return-button>
    </div>

    <!-- Form Container -->
    <div class="flex w-full justify-center">
      <form
        class="relative w-full max-w-[360px] overflow-hidden rounded-3xl border border-[#e8f4fc] bg-white/95 p-5 shadow-xl backdrop-blur-sm sm:max-w-[420px] sm:p-8 md:max-w-[480px] md:p-10"
        (ngSubmit)="onSubmit()"
        [formGroup]="loginForm"
      >
        <!-- Decoraciones de fondo -->
        <div
          class="absolute top-0 right-0 h-24 w-24 rounded-bl-full bg-linear-to-bl from-[#1788EF]/10 to-transparent sm:h-32 sm:w-32"
        ></div>
        <div
          class="absolute bottom-0 left-0 h-20 w-20 rounded-tr-full bg-linear-to-tr from-[#00A448]/10 to-transparent sm:h-28 sm:w-28"
        ></div>

        <!-- Encabezado del formulario -->
        <div class="relative z-10 mb-6 space-y-2 text-center sm:mb-8 sm:space-y-3">
          <h2
            class="nunito-sans-title text-[22px] font-bold text-gray-800 sm:text-3xl md:text-[36px] lg:text-[40px]"
          >
            Iniciar sesión
          </h2>
          <p class="text-xs leading-relaxed text-gray-500 sm:text-sm md:text-base">
            ¡Bienvenido de nuevo! Ingresa tus credenciales para acceder a tu cuenta
          </p>
        </div>

        <!-- Campos del formulario -->
        <div class="relative z-10 space-y-4 sm:space-y-5">
          <!-- Campo de correo -->
          <div class="space-y-1 sm:space-y-1.5">
            <label class="floating-label block">
              <span class="text-xs font-medium text-gray-700 sm:text-sm">Correo electrónico</span>
              <div class="mt-1 sm:mt-1.5">
                <input
                  type="text"
                  formControlName="email"
                  placeholder="mail@site.com"
                  autocomplete="username"
                  appEmailFormat
                  [class.border-red-500]="emailInvalid && loginForm.get('email')?.touched"
                  [class.border-green-500]="!emailInvalid && loginForm.get('email')?.touched && loginForm.get('email')?.value"
                  class="input input-sm w-full rounded-xl border-gray-200 bg-gray-50/50 text-gray-800 placeholder-gray-400 transition-all duration-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:outline-none sm:input-md md:input-lg"
                />
              </div>
            </label>
            <div class="min-h-5 sm:min-h-5">
              <small
                class="block text-[10px] font-medium text-red-500 opacity-0 transition-opacity duration-200 sm:text-xs md:text-sm"
                [class.opacity-100]="formInitialized && emailInvalid && loginForm.get('email')?.touched"
              >
                <span *ngIf="loginForm.get('email')?.hasError('required')"
                  >El correo electrónico es obligatorio.</span
                >
                <span *ngIf="loginForm.get('email')?.hasError('email')"
                  >Ingresa un correo electrónico válido.</span
                >
                <span *ngIf="loginForm.get('email')?.hasError('maxlength')"
                  >El correo es demasiado largo.</span
                >
              </small>
            </div>
          </div>

          <!-- Campo de contraseña -->
          <div class="space-y-1 sm:space-y-1.5">
            <label class="floating-label block">
              <span class="text-xs font-medium text-gray-700 sm:text-sm">Contraseña</span>
              <div class="mt-1 flex items-center gap-2 sm:mt-1.5">
                <input
                  [type]="showPassword ? 'text' : 'password'"
                  formControlName="password"
                  placeholder="••••••••"
                  id="passwordInput"
                  autocomplete="current-password"
                  appPasswordFormat
                  [class.border-red-500]="passwordInvalid && loginForm.get('password')?.touched"
                  [class.border-green-500]="!passwordInvalid && loginForm.get('password')?.touched && loginForm.get('password')?.value"
                  class="input input-sm flex-1 rounded-xl border-gray-200 bg-gray-50/50 text-gray-800 placeholder-gray-400 transition-all duration-200 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:outline-none sm:input-md md:input-lg"
                />
                <button
                  type="button"
                  (mousedown)="$event.preventDefault()"
                  (click)="togglePasswordVisibility()"
                  class="btn btn-square rounded-xl border-gray-200 bg-gray-50/50 text-gray-500 transition-all duration-200 btn-sm hover:border-blue-300 hover:bg-blue-50 hover:text-blue-600 sm:btn-md md:btn-lg"
                  [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
                >
                  <span
                    *ngIf="!showPassword"
                    class="icon-[fluent--eye-16-regular] text-base sm:text-lg md:text-xl"
                  ></span>
                  <span
                    *ngIf="showPassword"
                    class="icon-[fluent--eye-off-16-regular] text-base sm:text-lg md:text-xl"
                  ></span>
                </button>
              </div>
            </label>
            <div class="min-h-5 sm:min-h-5">
              <small
                class="block text-[10px] font-medium text-red-500 opacity-0 transition-opacity duration-200 sm:text-xs md:text-sm"
                [class.opacity-100]="formInitialized && passwordInvalid && loginForm.get('password')?.touched"
              >
                <span *ngIf="loginForm.get('password')?.hasError('required')"
                  >La contraseña es obligatoria.</span
                >
                <span *ngIf="loginForm.get('password')?.hasError('minlength')"
                  >Mínimo 8 caracteres.</span
                >
              </small>
            </div>
          </div>
        </div>

        <!-- Recordarme y Olvidé contraseña -->
        <div
          class="relative z-10 mt-4 mb-5 flex flex-col gap-3 sm:mt-5 sm:mb-7 sm:flex-row sm:items-center sm:justify-between sm:gap-0"
        >
          <label class="group flex cursor-pointer items-center gap-2 select-none sm:gap-3">
            <input
              type="checkbox"
              formControlName="remember"
              class="checkbox rounded-md checkbox-xs checkbox-primary sm:checkbox-sm"
            />
            <span
              class="text-xs text-gray-600 transition-colors group-hover:text-gray-800 sm:text-sm"
              >Recordarme</span
            >
          </label>
          <a
            href="/recuperar-contrasena"
            class="self-end text-xs font-medium text-blue-600 underline-offset-2 transition-colors hover:text-blue-700 hover:underline sm:self-auto sm:text-sm"
          >
            ¿Olvidaste tu contraseña?
          </a>
        </div>

        <!-- Botón de submit -->
        <button
          type="submit"
          class="btn relative z-10 btn-block rounded-xl border-blue-600 bg-blue-600 font-semibold text-white shadow-lg shadow-blue-600/25 transition-all duration-200 btn-sm hover:border-blue-700 hover:bg-blue-700 hover:shadow-blue-700/30 disabled:cursor-not-allowed disabled:opacity-70 sm:btn-md md:btn-lg"
          [disabled]="isLoading"
        >
          @if (isLoading) {
          <span class="loading loading-xs loading-spinner sm:loading-sm"></span>
          <span class="text-xs sm:text-sm md:text-base">Ingresando...</span>
          } @else {
          <span class="text-xs sm:text-sm md:text-base">Ingresar</span>
          }
        </button>

        <!-- Separador -->
        <div class="relative z-10 divider my-4 text-[10px] text-gray-400 sm:my-6 sm:text-xs">o</div>

        <!-- Link de registro -->
        <p class="relative z-10 text-center text-xs text-gray-500 sm:text-sm">
          ¿No tienes una cuenta?
          <a
            href="/crear-cuenta"
            class="ml-1 font-semibold text-blue-600 transition-colors hover:text-blue-700 hover:underline"
          >
            Regístrate aquí
          </a>
        </p>
      </form>
    </div>
  </div>

  <!-- Right Side: Branding Section -->
  <div
    class="relative hidden min-h-screen w-1/2 flex-col overflow-hidden bg-olas_azules bg-cover bg-center lg:flex"
  >
    <!-- Overlay Gradient -->
    <div
      class="absolute inset-0 bg-linear-to-b from-blue-900/30 to-blue-800/10 backdrop-blur-[1px]"
    ></div>

    <!-- Content -->
    <div
      class="relative z-10 flex flex-1 flex-col items-center justify-center p-12 text-center"
      appAnimateOnScroll="animate-fade-left"
      animationDuration="slow"
    >
      <div class="mb-12">
        <img
          src="images/imagotipo/imagotipo_simulabank_claro.svg"
          class="h-auto w-[450px] drop-shadow-2xl"
          alt="SimulaBank"
        />
      </div>

      <div class="max-w-xl space-y-6">
        <h1 class="text-4xl font-bold tracking-tight text-white drop-shadow-lg">
          Domina la asesoría bancaria hoy
        </h1>
        <p class="text-lg leading-relaxed font-medium text-blue-50/90 drop-shadow-md">
          Experiencias interactivas con IA para entrenar, fortalecer decisiones y potenciar tu
          desarrollo profesional en un espacio confiable y auténtico.
        </p>

        <div class="mx-auto mt-8 flex w-full max-w-[400px] justify-center">
          <dotlottie-player
            src="lotties/asesor_animado_2.lottie"
            background="transparent"
            speed="1"
            style="width: 100%; height: 100%"
            loop
            autoplay
          ></dotlottie-player>
        </div>
      </div>
    </div>

    <!-- Decorative Elements -->
    <div class="absolute -right-24 -bottom-24 h-96 w-96 rounded-full bg-blue-400/20 blur-3xl"></div>
    <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-blue-300/10 blur-3xl"></div>
  </div>
</div>
