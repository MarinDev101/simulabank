<div class="flex h-full w-full flex-col gap-3 rounded-xl bg-white p-15 shadow-md">
  <div class="flex items-center gap-2">
    <span
      class="flex h-6 w-6 items-center justify-center rounded-full bg-[#333333] text-sm font-bold text-white"
    >
      2
    </span>
    <p class="text-base md:text-inherit dark:text-gray-200">Validar Cuenta</p>
  </div>

  <p>
    ¡Hemos enviado un correo electrónico con un código de verificación de 6 dígitos a tu dirección
    <strong>{{ correoUsuario }}</strong>!
  </p>
  <p class="text-sm text-gray-600">*El código caduca en 5 minutos*</p>

  <!-- Mensaje de error -->
  @if (errorMessage) {
  <div class="rounded-lg border border-red-200 bg-red-50 p-4">
    <div class="flex items-start">
      <span class="mt-0.5 mr-3 icon-[hugeicons--alert-circle] text-xl text-red-600"></span>
      <p class="text-sm text-red-800">{{ errorMessage }}</p>
    </div>
  </div>
  }

  <!-- Mensaje de éxito al reenviar -->
  @if (resendMessage) {
  <div class="rounded-lg border border-green-200 bg-green-50 p-4">
    <div class="flex items-start">
      <span class="mt-0.5 mr-3 icon-[hugeicons--checkmark-circle-02] text-xl text-green-600"></span>
      <p class="text-sm text-green-800">{{ resendMessage }}</p>
    </div>
  </div>
  }

  <form [formGroup]="pinForm" class="flex justify-center">
    <div #inputsContainer class="mt-3 flex justify-center gap-3" (paste)="onPaste($event)">
      <input
        *ngFor="let ctrl of pinControls; let i = index"
        maxlength="1"
        type="text"
        formControlName="{{ 'digit' + i }}"
        (input)="onInput($event, i)"
        (keydown)="onKeyDown($event, i)"
        class="h-12 w-12 rounded-md border border-gray-400 text-center text-xl outline-none focus:border-[#01162E] focus:ring-2 focus:ring-[#01162E]"
      />
    </div>
  </form>

  <button
    (click)="verificarCodigo()"
    class="mt-5 cursor-pointer rounded-lg bg-[#01162E] p-2 text-white hover:bg-[#012042]"
    [disabled]="isLoading"
  >
    @if (isLoading) {
    <span class="loading loading-sm loading-spinner"></span>
    Verificando... } @else { Verificar }
  </button>

  <div class="flex justify-around">
    <button
      class="mt-5 w-[150px] cursor-pointer rounded-lg bg-[#01162E] p-2 text-white hover:bg-[#012042]"
      (click)="emitirVolver()"
      [disabled]="isLoading"
    >
      Volver
    </button>
    <button
      class="mt-5 w-[150px] cursor-pointer rounded-lg border border-black p-2 hover:bg-gray-100"
      (click)="reenviarCodigo()"
      [disabled]="isResending || isLoading"
    >
      @if (isResending) {
      <span class="loading loading-sm loading-spinner"></span>
      Reenviando... } @else { Reenviar código }
    </button>
  </div>
</div>
