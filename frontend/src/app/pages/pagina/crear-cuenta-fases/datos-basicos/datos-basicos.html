<div class="flex flex-col gap-3 w-full h-full bg-white rounded-xl p-15 shadow-md">
  <div class="flex gap-2 items-center">
    <span
      class="flex justify-center items-center font-bold bg-[#333333] text-white rounded-full w-6 h-6 text-sm">1</span>
    <p class="text-base md:text-inherit dark:text-gray-200">Datos Básicos</p>
  </div>

  <p>*Todos los campos son obligatorios.</p>

  <form [formGroup]="formCrearCuenta" (ngSubmit)="validarCuenta()" class="flex flex-col gap-6">
    <div class="flex gap-6">
      <!-- Nombre -->
      <div class="flex-1 relative">
        <label class="floating-label block relative">
          <span class="text-base text-gray-600">Nombre</span>
          <div class="relative">
            <input type="text" formControlName="nombre" placeholder="Ingresa tu nombre"
              [class.border-red-500]="f['nombre'].invalid && f['nombre'].touched"
              class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 pr-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <!-- Ícono fijo -->
            <span
              class="icon-[material-symbols-light--id-card-rounded] absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-xl pointer-events-none z-10"></span>
          </div>
        </label>
        <small class="block text-sm transition-all duration-200"
          [class.text-red-600]="f['nombre'].invalid && f['nombre'].touched"
          [style.visibility]="f['nombre'].invalid && f['nombre'].touched ? 'visible' : 'hidden'">
          <span *ngIf="f['nombre'].hasError('required')">El nombre es requerido.</span>
          <span *ngIf="f['nombre'].hasError('minlength')">Mínimo 2 caracteres.</span>
          <span *ngIf="f['nombre'].hasError('pattern')">Solo se permiten letras.</span>
        </small>
      </div>

      <!-- Apellido -->
      <div class="flex-1 relative">
        <label class="floating-label block relative">
          <span class="text-base text-gray-600">Apellido</span>
          <div class="relative">
            <input type="text" formControlName="apellido" placeholder="Ingresa tu apellido"
              [class.border-red-500]="f['apellido'].invalid && f['apellido'].touched"
              class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 pr-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <!-- Ícono fijo -->
            <span
              class="icon-[material-symbols-light--id-card-rounded] absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-xl pointer-events-none z-10"></span>
          </div>
        </label>
        <small class="block text-sm transition-all duration-200"
          [class.text-red-600]="f['apellido'].invalid && f['apellido'].touched"
          [style.visibility]="f['apellido'].invalid && f['apellido'].touched ? 'visible' : 'hidden'">
          <span *ngIf="f['apellido'].hasError('required')">El apellido es requerido.</span>
          <span *ngIf="f['apellido'].hasError('minlength')">Mínimo 2 caracteres.</span>
          <span *ngIf="f['apellido'].hasError('pattern')">Solo se permiten letras.</span>
        </small>
      </div>
    </div>

    <!-- Correo -->
    <div class="relative">
      <label class="floating-label block relative">
        <span class="text-base text-gray-600">Correo electrónico</span>
        <div class="relative">
          <input type="email" formControlName="correo" placeholder="mail@site.com"
            [class.border-red-500]="f['correo'].invalid && f['correo'].touched"
            class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 pr-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          <!-- Ícono fijo -->
          <span
            class="icon-[material-symbols-light--mail-rounded] absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-xl pointer-events-none z-10"></span>
        </div>
      </label>
      <small class="block text-sm transition-all duration-200"
        [class.text-red-600]="f['correo'].invalid && f['correo'].touched"
        [style.visibility]="f['correo'].invalid && f['correo'].touched ? 'visible' : 'hidden'">
        <span *ngIf="f['correo'].hasError('required')">El correo es requerido.</span>
        <span *ngIf="f['correo'].hasError('email')">Ingresa un correo válido.</span>
      </small>
    </div>

    <hr class="mt-3 mb-3 border border-[#e9e9e9]">

    <div class="flex gap-6">
      <!-- Contraseña -->
      <div class="flex-1">
        <label class="floating-label block">
          <span class="text-base text-gray-600">Contraseña</span>
          <div class="flex items-center gap-3">
            <input [type]="mostrarContrasena ? 'text' : 'password'" formControlName="contrasena"
              (input)="verificarIndicaciones()" placeholder="••••••••"
              [class.border-red-500]="f['contrasena'].invalid && f['contrasena'].touched"
              class="input input-lg flex-1 border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleContrasena()"
              class="flex h-11 w-11 items-center justify-center rounded-xl border border-gray-300 bg-white text-gray-600 shadow-sm hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none">
              <span *ngIf="!mostrarContrasena" class="icon-[fluent--eye-16-regular] text-xl"></span>
              <span *ngIf="mostrarContrasena" class="icon-[fluent--eye-off-16-regular] text-xl"></span>
            </button>
          </div>
        </label>
        <small class="block text-sm transition-all duration-200"
          [class.text-red-600]="f['contrasena'].invalid && f['contrasena'].touched"
          [style.visibility]="f['contrasena'].invalid && f['contrasena'].touched ? 'visible' : 'hidden'">
          Faltan requerimientos para la contraseña.
        </small>
      </div>

      <!-- Confirmar Contraseña -->
      <div class="flex-1">
        <label class="floating-label block">
          <span class="text-base text-gray-600">Confirmar contraseña</span>
          <div class="flex items-center gap-3">
            <input [type]="mostrarConfirmarContrasena ? 'text' : 'password'" formControlName="confirmarContrasena"
              placeholder="••••••••"
              [class.border-red-500]="(f['confirmarContrasena'].touched && formCrearCuenta.errors?.['noCoinciden'])"
              class="input input-lg flex-1 border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleConfirmarContrasena()"
              class="flex h-11 w-11 items-center justify-center rounded-xl border border-gray-300 bg-white text-gray-600 shadow-sm hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none">
              <span *ngIf="!mostrarConfirmarContrasena" class="icon-[fluent--eye-16-regular] text-xl"></span>
              <span *ngIf="mostrarConfirmarContrasena" class="icon-[fluent--eye-off-16-regular] text-xl"></span>
            </button>
          </div>
        </label>
        <small class="block text-sm transition-all duration-200"
          [class.text-red-600]="formCrearCuenta.errors?.['noCoinciden'] && f['confirmarContrasena'].touched"
          [style.visibility]="formCrearCuenta.errors?.['noCoinciden'] && f['confirmarContrasena'].touched ? 'visible' : 'hidden'">
          Las contraseñas no coinciden.
        </small>
      </div>
    </div>

    <!-- Indicaciones dinámicas -->
    <div class="flex gap-12 text-sm">
      <ul class="space-y-2">
        <li class="flex items-center gap-2" [class.text-green-600]="indicaciones.longitud"
          [class.text-red-500]="!indicaciones.longitud">
          <span class="w-2 h-2 rounded-full" [class.bg-green-600]="indicaciones.longitud"
            [class.bg-red-500]="!indicaciones.longitud"></span>
          Usa 8 o más caracteres
        </li>
        <li class="flex items-center gap-2" [class.text-green-600]="indicaciones.numero"
          [class.text-red-500]="!indicaciones.numero">
          <span class="w-2 h-2 rounded-full" [class.bg-green-600]="indicaciones.numero"
            [class.bg-red-500]="!indicaciones.numero"></span>
          Incluye al menos un número
        </li>
      </ul>

      <ul class="space-y-2">
        <li class="flex items-center gap-2" [class.text-green-600]="indicaciones.mayuscula"
          [class.text-red-500]="!indicaciones.mayuscula">
          <span class="w-2 h-2 rounded-full" [class.bg-green-600]="indicaciones.mayuscula"
            [class.bg-red-500]="!indicaciones.mayuscula"></span>
          Usa letras mayúsculas y minúsculas
        </li>
        <li class="flex items-center gap-2" [class.text-green-600]="indicaciones.simbolo"
          [class.text-red-500]="!indicaciones.simbolo">
          <span class="w-2 h-2 rounded-full" [class.bg-green-600]="indicaciones.simbolo"
            [class.bg-red-500]="!indicaciones.simbolo"></span>
          Incluye un símbolo (!@#$)
        </li>
      </ul>
    </div>

    <!-- Términos -->
    <div>
      <label class="flex cursor-pointer items-center gap-2 text-base text-gray-700 bg-none">
        <input type="checkbox" formControlName="terminos" class="checkbox checkbox-md" />
        <span>
          Acepto los <a href="#" class="text-[#01162E] hover:underline">términos de uso</a> y <a href="#"
            class="text-[#01162E] hover:underline">política de privacidad</a>
        </span>
      </label>
      <small class="block text-sm transition-all duration-200"
        [class.text-red-600]="f['terminos'].invalid && f['terminos'].touched"
        [style.visibility]="f['terminos'].invalid && f['terminos'].touched ? 'visible' : 'hidden'">
        Debe aceptar los términos y condiciones.
      </small>
    </div>

    <!-- reCAPTCHA -->
    <div class="flex flex-col">
      <re-captcha [siteKey]="siteKey" formControlName="recaptcha" (resolved)="onRecaptchaResolved($event)"></re-captcha>
      <small class="block text-sm transition-all duration-200"
        [class.text-red-600]="f['recaptcha']?.invalid && f['recaptcha']?.touched"
        [style.visibility]="f['recaptcha']?.invalid && f['recaptcha']?.touched ? 'visible' : 'hidden'">
        Por favor, complete el captcha.
      </small>
    </div>

    <button type="submit" class="btn btn-block bg-[#01162E] text-white hover:bg-[#012042]">Validar cuenta</button>
  </form>
</div>