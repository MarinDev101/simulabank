<app-header-basico></app-header-basico>

<div class="flex flex-col items-center justify-center gap-10 bg-[#F9F9FA]">
  <h2 class="nunito-sans-title text-center text-[40px] font-semibold mt-40">
    Crear cuenta
  </h2>

  <ul class="steps w-[60%] max-w-4xl">
    <li class="step step-neutral">Datos Básicos</li>
    <li class="step">Validar Cuenta</li>
    <li class="step">Personalizar Perfil</li>
  </ul>

  <div class="flex flex-col gap-3 w-full max-w-3xl bg-white rounded-xl p-15 shadow-md mb-20">
    <div class="flex gap-2 items-center">
      <span class="flex justify-center items-center font-bold bg-[#333333] text-white rounded-full w-6 h-6 text-sm">
        1
      </span>
      <p class="text-base md:text-inherit dark:text-gray-200">Datos Básicos</p>
    </div>

    <p>*Todos los campos son obligatorios.</p>

    <form [formGroup]="formCrearCuenta" (ngSubmit)="validarCuenta()" class="flex flex-col gap-6">
      <div class="flex gap-6">
        <!-- Nombre -->
        <div class="flex-1">
          <label class="floating-label block">
            <span class="text-base text-gray-600">Nombre</span>
            <input type="text" formControlName="nombre" placeholder="Ingresa tu nombre"
              [class.border-red-500]="submitted && f['nombre'].invalid"
              class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <span *ngIf="submitted && f['nombre'].errors" class="mt-1 block text-sm text-red-600">
              <span *ngIf="f['nombre'].hasError('required')">El nombre es requerido.</span>
              <span *ngIf="f['nombre'].hasError('minlength')">Mínimo 2 caracteres.</span>
              <span *ngIf="f['nombre'].hasError('pattern')">Solo se permiten letras.</span>
            </span>
          </label>
        </div>

        <!-- Apellido -->
        <div class="flex-1">
          <label class="floating-label block">
            <span class="text-base text-gray-600">Apellido</span>
            <input type="text" formControlName="apellido" placeholder="Ingresa tu apellido"
              [class.border-red-500]="submitted && f['apellido'].invalid"
              class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            <span *ngIf="submitted && f['apellido'].errors" class="mt-1 block text-sm text-red-600">
              <span *ngIf="f['apellido'].hasError('required')">El apellido es requerido.</span>
              <span *ngIf="f['apellido'].hasError('minlength')">Mínimo 2 caracteres.</span>
              <span *ngIf="f['apellido'].hasError('pattern')">Solo se permiten letras.</span>
            </span>
          </label>
        </div>
      </div>

      <!-- Correo -->
      <div>
        <label class="floating-label block">
          <span class="text-base text-gray-600">Correo electrónico</span>
          <input type="email" formControlName="correo" placeholder="mail@site.com"
            [class.border-red-500]="submitted && f['correo'].invalid"
            class="input input-lg w-full border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          <span *ngIf="submitted && f['correo'].errors" class="mt-1 block text-sm text-red-600">
            <span *ngIf="f['correo'].hasError('required')">El correo es requerido.</span>
            <span *ngIf="f['correo'].hasError('email')">Ingresa un correo válido.</span>
          </span>
        </label>
      </div>

      <hr class="mt-3 mb-3 border border-[#e9e9e9]">

      <div class="flex gap-6">
        <!-- Contraseña -->
        <div class="flex-1">
          <label class="floating-label block">
            <span class="text-base text-gray-600">Contraseña</span>
            <div class="flex items-center gap-3">
              <input [type]="mostrarContrasena ? 'text' : 'password'" formControlName="contrasena"
                placeholder="••••••••" [class.border-red-500]="submitted && f['contrasena'].invalid"
                class="input input-lg flex-1 border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
              <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleContrasena()"
                class="flex h-11 w-11 items-center justify-center rounded-xl border border-gray-300 bg-white text-gray-600 shadow-sm hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none">
                <span *ngIf="!mostrarContrasena" class="icon-[fluent--eye-16-regular] text-xl"></span>
                <span *ngIf="mostrarContrasena" class="icon-[fluent--eye-off-16-regular] text-xl"></span>
              </button>
            </div>
            <span *ngIf="submitted && f['contrasena'].errors" class="mt-1 block text-sm text-red-600">
              <span *ngIf="f['contrasena'].hasError('required')">La contraseña es requerida.</span>
              <span *ngIf="f['contrasena'].hasError('minlength')">Mínimo 8 caracteres.</span>
              <span *ngIf="f['contrasena'].hasError('pattern')">Debe incluir al menos una mayúscula, un número y un
                carácter especial.</span>
            </span>
          </label>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="flex-1">
          <label class="floating-label block">
            <span class="text-base text-gray-600">Confirmar contraseña</span>
            <div class="flex items-center gap-3">
              <input [type]="mostrarConfirmarContrasena ? 'text' : 'password'" formControlName="confirmarContrasena"
                placeholder="••••••••"
                [class.border-red-500]="submitted && (f['confirmarContrasena'].invalid || formCrearCuenta.errors?.['noCoinciden'])"
                class="input input-lg flex-1 border-gray-300 text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
              <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleConfirmarContrasena()"
                class="flex h-11 w-11 items-center justify-center rounded-xl border border-gray-300 bg-white text-gray-600 shadow-sm hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none">
                <span *ngIf="!mostrarConfirmarContrasena" class="icon-[fluent--eye-16-regular] text-xl"></span>
                <span *ngIf="mostrarConfirmarContrasena" class="icon-[fluent--eye-off-16-regular] text-xl"></span>
              </button>
            </div>
            <span *ngIf="submitted && (f['confirmarContrasena'].errors || formCrearCuenta.errors?.['noCoinciden'])"
              class="mt-1 block text-sm text-red-600">
              <span *ngIf="f['confirmarContrasena'].hasError('required')">La confirmación es requerida.</span>
              <span *ngIf="formCrearCuenta.errors?.['noCoinciden']">Las contraseñas no coinciden.</span>
            </span>
          </label>
        </div>
      </div>
      <div class="flex gap-12 text-gray-500 text-sm">
        <ul class="space-y-2">
          <li class="flex items-center gap-2">
            <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
            Usa 8 o más caracteres
          </li>
          <li class="flex items-center gap-2">
            <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
            Incluye al menos un número (ej: 1234)
          </li>
        </ul>

        <ul class="space-y-2">
          <li class="flex items-center gap-2">
            <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
            Usa letras mayúsculas y minúsculas (ej: Aa)
          </li>
          <li class="flex items-center gap-2">
            <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
            Incluye un símbolo (ej: !@#$)
          </li>
        </ul>
      </div>


      <!-- Términos y Condiciones -->
      <div>
        <label class="flex cursor-pointer items-center gap-2 text-base text-gray-700 bg-none">
          <input type="checkbox" formControlName="terminos" class="checkbox checkbox-md" />
          <span>
            Acepto los <a href="#" class="text-[#01162E] hover:underline">términos de uso</a> y <a href="#"
              class="text-[#01162E] hover:underline">política de privacidad</a>
          </span>
        </label>
        <span *ngIf="submitted && f['terminos'].errors" class="mt-1 block text-sm text-red-600">
          Debe aceptar los términos y condiciones.
        </span>
      </div>

      <!-- reCAPTCHA -->
      <div class="flex flex-col">
        <re-captcha siteKey="6Ld1Y_krAAAAANnFX7riXM65MWDSuQMmEm1krU33" formControlName="recaptcha"
          (resolved)="onRecaptchaResolved($event)"></re-captcha>
        <span *ngIf="submitted && f['recaptcha']?.errors" class="mt-1 block text-sm text-red-600">
          Por favor, complete el captcha.
        </span>
      </div>

      <!-- Botón -->
      <button type="submit" class="btn btn-block bg-[#01162E] text-white hover:bg-[#012042]">
        Validar cuenta
      </button>
    </form>

  </div>
</div>

<app-footer></app-footer>
