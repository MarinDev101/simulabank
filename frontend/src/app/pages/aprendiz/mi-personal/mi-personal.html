<div class="flex min-h-full w-full flex-col items-center gap-6 sm:gap-8">
  <!-- Hero Section - Título y Descripción -->
  <section class="w-full max-w-5xl">
    <div class="relative overflow-hidden rounded-2xl border border-[#e8f4fc] bg-white p-6 shadow-lg shadow-gray-200/60 sm:p-8 md:p-10 dark:border-gray-700 dark:bg-gray-800 dark:shadow-gray-900/30">
      <!-- Decoraciones de fondo -->
      <div class="absolute right-0 top-0 h-20 w-20 rounded-bl-full bg-linear-to-bl from-[#8b5cf6]/10 to-transparent sm:h-28 sm:w-28 md:h-40 md:w-40 dark:from-[#8b5cf6]/20"></div>
      <div class="absolute bottom-0 left-0 h-16 w-16 rounded-tr-full bg-linear-to-tr from-[#1788EF]/10 to-transparent sm:h-24 sm:w-24 md:h-36 md:w-36 dark:from-[#1788EF]/20"></div>

      <div class="relative z-10">
        <!-- Encabezado con icono -->
        <div class="mb-4 flex flex-col items-center md:mb-6">
          <div class="mb-4 flex items-center justify-center">
            <div class="flex h-14 w-14 items-center justify-center rounded-2xl bg-[#8b5cf6]/10 sm:h-16 sm:w-16 md:h-20 md:w-20 dark:bg-[#8b5cf6]/20">
              <span class="icon-[hugeicons--folder-02] h-8 w-8 text-[#8b5cf6] sm:h-10 sm:w-10 md:h-12 md:w-12"></span>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <h1 class="text-center text-2xl font-bold text-[#034D82] sm:text-3xl md:text-4xl dark:text-white">
              Mi Personal
            </h1>
            <span class="rounded-full bg-[#8b5cf6]/10 px-3 py-1 text-sm font-semibold text-[#8b5cf6] sm:px-4 sm:text-base dark:bg-[#8b5cf6]/20">
              {{ evidencias.length }} archivos
            </span>
          </div>
        </div>

        <!-- Descripción principal -->
        <div class="mx-auto max-w-3xl text-center">
          <p class="text-sm leading-relaxed text-[#4a5d6f] sm:text-base md:text-lg md:leading-[1.8] dark:text-gray-300">
            Aquí encontrarás todos los <span class="font-medium text-[#8b5cf6]">registros de tus simulaciones</span> realizadas en SimulaBank.
            Visualiza, descarga y organiza tus <span class="font-medium text-[#1788EF]">evidencias de aprendizaje</span>.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de Filtros -->
  <section class="w-full max-w-5xl">
    <div class="overflow-hidden rounded-xl border border-[#e8f4fc] bg-white shadow-sm shadow-gray-200/60 dark:border-gray-700 dark:bg-gray-800 dark:shadow-gray-900/20">
      <!-- Header de filtros -->
      <div class="flex flex-col gap-4 border-b border-[#e8f4fc] bg-linear-to-r from-[#8b5cf6]/5 via-transparent to-[#1788EF]/5 px-4 py-4 sm:px-6 dark:border-gray-700 dark:from-[#8b5cf6]/10 dark:to-[#1788EF]/10">
        <!-- Filtros de estado -->
        <div class="flex items-center gap-2">
          <div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-[#8b5cf6]/10 dark:bg-[#8b5cf6]/20">
            <span class="icon-[hugeicons--filter] h-4 w-4 text-[#8b5cf6]"></span>
          </div>
          <div class="flex flex-wrap gap-2">
            <button
              (click)="cambiarFiltroEstado('visibles')"
              [class]="filtroEstado === 'visibles'
                ? 'bg-[#8b5cf6] text-white shadow-md shadow-[#8b5cf6]/25'
                : 'bg-white text-[#4a5d6f] hover:bg-[#8b5cf6]/10 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-[#8b5cf6]/20'"
              class="cursor-pointer rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200">
              <span class="flex items-center gap-1.5">
                <span class="icon-[hugeicons--view] h-4 w-4"></span>
                Visibles
              </span>
            </button>

            <button
              (click)="cambiarFiltroEstado('archivadas')"
              [class]="filtroEstado === 'archivadas'
                ? 'bg-[#f59e0b] text-white shadow-md shadow-[#f59e0b]/25'
                : 'bg-white text-[#4a5d6f] hover:bg-[#f59e0b]/10 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-[#f59e0b]/20'"
              class="cursor-pointer rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200">
              <span class="flex items-center gap-1.5">
                <span class="icon-[hugeicons--archive] h-4 w-4"></span>
                Archivadas
              </span>
            </button>

            <button
              (click)="cambiarFiltroEstado('todas')"
              [class]="filtroEstado === 'todas'
                ? 'bg-[#034D82] text-white shadow-md shadow-[#034D82]/25 dark:bg-blue-600'
                : 'bg-white text-[#4a5d6f] hover:bg-[#034D82]/10 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-blue-600/20'"
              class="cursor-pointer rounded-full px-4 py-1.5 text-sm font-medium transition-all duration-200">
              <span class="flex items-center gap-1.5">
                <span class="icon-[hugeicons--folder-library] h-4 w-4"></span>
                Ver todo
              </span>
            </button>
          </div>
        </div>

        <!-- Filtros de fecha -->
        <div class="flex flex-wrap items-end gap-3">
          <label class="flex flex-col gap-1">
            <span class="text-xs font-medium text-[#4a5d6f] dark:text-gray-400">Desde</span>
            <input
              type="datetime-local"
              [value]="filtroFechaDesde"
              (change)="onFechaDesdeChange($event)"
              class="rounded-lg border border-[#e8f4fc] bg-white px-3 py-2 text-sm text-[#034D82] transition-all focus:border-[#8b5cf6] focus:ring-2 focus:ring-[#8b5cf6]/20 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100" />
          </label>

          <label class="flex flex-col gap-1">
            <span class="text-xs font-medium text-[#4a5d6f] dark:text-gray-400">Hasta</span>
            <input
              type="datetime-local"
              [value]="filtroFechaHasta"
              (change)="onFechaHastaChange($event)"
              class="rounded-lg border border-[#e8f4fc] bg-white px-3 py-2 text-sm text-[#034D82] transition-all focus:border-[#8b5cf6] focus:ring-2 focus:ring-[#8b5cf6]/20 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100" />
          </label>
        </div>
      </div>

      <!-- Estados de carga -->
      <div *ngIf="cargando" class="flex items-center justify-center py-16">
        <div class="flex flex-col items-center gap-4">
          <div class="relative">
            <div class="h-16 w-16 animate-spin rounded-full border-4 border-[#e8f4fc] border-t-[#8b5cf6] dark:border-gray-700 dark:border-t-[#8b5cf6]"></div>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="icon-[hugeicons--folder-02] h-6 w-6 text-[#8b5cf6]"></span>
            </div>
          </div>
          <p class="text-sm font-medium text-[#4a5d6f] dark:text-gray-400">Cargando evidencias...</p>
        </div>
      </div>

      <div *ngIf="error" class="m-4 rounded-xl border border-red-200 bg-red-50 p-4 dark:border-red-900/50 dark:bg-red-900/20">
        <div class="flex items-center gap-3">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30">
            <span class="icon-[hugeicons--alert-circle] h-5 w-5 text-red-500"></span>
          </div>
          <p class="text-sm text-red-600 dark:text-red-400">{{ error }}</p>
        </div>
      </div>

      <!-- Contenido de la tabla -->
      <div *ngIf="!cargando && !error" class="p-4 sm:p-6">
        <!-- Estado vacío -->
        <div *ngIf="evidenciasPaginadas.length === 0" class="flex flex-col items-center justify-center py-12">
          <div class="mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700">
            <span class="icon-[hugeicons--folder-search] h-10 w-10 text-gray-400 dark:text-gray-500"></span>
          </div>
          <h3 class="mb-2 text-lg font-semibold text-[#034D82] dark:text-white">No hay evidencias</h3>
          <p class="max-w-md text-center text-sm text-[#4a5d6f] dark:text-gray-400">
            No se encontraron evidencias con los filtros seleccionados. Intenta ajustar los filtros o realiza nuevas simulaciones.
          </p>
        </div>

        <!-- Grid de tarjetas para móvil, tabla para desktop -->
        <div *ngIf="evidenciasPaginadas.length > 0">
          <!-- Paginación móvil (arriba de las tarjetas) -->
          <div *ngIf="evidenciasFiltradas.length > 0" class="flex flex-col gap-3 border-b border-[#e8f4fc] bg-gray-50/50 px-4 py-4 sm:hidden dark:border-gray-700 dark:bg-gray-900/30">
            <!-- Selector de items por página -->
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <span class="text-sm font-medium text-[#4a5d6f] dark:text-gray-400">Mostrar</span>
                <div class="dropdown dropdown-bottom dropdown-center" [class.dropdown-open]="isOpen">
                  <div tabindex="0" (click)="toggleDropdown()"
                    class="flex h-9 min-w-14 cursor-pointer items-center justify-between gap-1.5 rounded-lg border border-[#e8f4fc] bg-white px-2.5 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100">
                    <span>{{ selectedValue }}</span>
                    <span class="icon-[hugeicons--arrow-down-01] h-4 w-4 text-[#4a5d6f]"></span>
                  </div>

                  <ul tabindex="0"
                    class="dropdown-content menu z-10 w-20 rounded-xl border border-[#e8f4fc] bg-white p-1.5 shadow-lg dark:border-gray-600 dark:bg-gray-700">
                    <li><a (click)="selectValue(5, $event)" class="cursor-pointer rounded-lg px-2.5 py-1.5 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">5</a></li>
                    <li><a (click)="selectValue(10, $event)" class="cursor-pointer rounded-lg px-2.5 py-1.5 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">10</a></li>
                    <li><a (click)="selectValue(15, $event)" class="cursor-pointer rounded-lg px-2.5 py-1.5 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">15</a></li>
                    <li><a (click)="selectValue(20, $event)" class="cursor-pointer rounded-lg px-2.5 py-1.5 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">20</a></li>
                  </ul>
                </div>
                <span class="text-sm text-[#4a5d6f] dark:text-gray-400">por página</span>
              </div>
              <span class="text-sm text-[#4a5d6f] dark:text-gray-400">
                Pág. <span class="font-semibold text-[#034D82] dark:text-white">{{ paginaActual }}</span>/<span class="font-semibold text-[#034D82] dark:text-white">{{ totalPaginas || 1 }}</span>
              </span>
            </div>

            <!-- Navegación de páginas -->
            <div class="flex items-center justify-center gap-2">
              <button (click)="paginaAnterior()" [disabled]="paginaActual === 1"
                [class.opacity-50]="paginaActual === 1"
                [class.cursor-not-allowed]="paginaActual === 1"
                class="flex h-9 flex-1 cursor-pointer items-center justify-center gap-2 rounded-lg border border-[#e8f4fc] bg-white px-3 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] hover:bg-[#8b5cf6]/5 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">
                <span class="icon-[hugeicons--arrow-left-01] h-4 w-4"></span>
                Anterior
              </button>

              <button (click)="paginaSiguiente()" [disabled]="paginaActual === totalPaginas"
                [class.opacity-50]="paginaActual === totalPaginas"
                [class.cursor-not-allowed]="paginaActual === totalPaginas"
                class="flex h-9 flex-1 cursor-pointer items-center justify-center gap-2 rounded-lg border border-[#e8f4fc] bg-white px-3 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] hover:bg-[#8b5cf6]/5 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">
                Siguiente
                <span class="icon-[hugeicons--arrow-right-01] h-4 w-4"></span>
              </button>
            </div>
          </div>

          <!-- Vista de tarjetas (móvil) -->
          <div class="grid gap-4 p-4 sm:hidden">
            <div *ngFor="let evidencia of evidenciasPaginadas"
              class="overflow-hidden rounded-xl border border-[#e8f4fc] bg-white shadow-sm transition-all hover:shadow-md dark:border-gray-700 dark:bg-gray-800">
              <!-- Header de la tarjeta -->
              <div class="flex items-center gap-3 border-b border-[#e8f4fc] bg-linear-to-r from-[#8b5cf6]/5 to-transparent p-4 dark:border-gray-700 dark:from-[#8b5cf6]/10">
                <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-[#8b5cf6]/10 dark:bg-[#8b5cf6]/20">
                  <span class="icon-[hugeicons--pdf-01] h-5 w-5 text-[#8b5cf6]"></span>
                </div>
                <div class="min-w-0 flex-1">
                  <h4 class="truncate text-sm font-semibold text-[#034D82] dark:text-white">{{ evidencia.nombreSugerido }}</h4>
                  <p class="text-xs text-[#4a5d6f] dark:text-gray-400">{{ formatearPeso(evidencia.peso_pdf_kb) }}</p>
                </div>
                <span [ngClass]="getColorModo(evidencia.modo)" class="shrink-0 rounded-full px-2.5 py-1 text-xs font-medium">
                  {{ evidencia.modo | titlecase }}
                </span>
              </div>

              <!-- Detalles -->
              <div class="grid grid-cols-2 gap-3 p-4">
                <div class="flex flex-col">
                  <span class="text-xs text-[#4a5d6f] dark:text-gray-400">Producto</span>
                  <span class="text-sm font-medium text-[#034D82] dark:text-white">{{ evidencia.producto_nombre }}</span>
                </div>
                <div class="flex flex-col">
                  <span class="text-xs text-[#4a5d6f] dark:text-gray-400">Tiempo</span>
                  <span class="text-sm font-medium text-[#034D82] dark:text-white">{{ formatearDuracion(evidencia.tiempo_duracion_segundos) }}</span>
                </div>
                <div class="col-span-2 flex flex-col">
                  <span class="text-xs text-[#4a5d6f] dark:text-gray-400">Fecha</span>
                  <span class="text-sm font-medium text-[#034D82] dark:text-white">{{ formatearFecha(evidencia.fecha_agregado) }}</span>
                </div>
              </div>

              <!-- Acciones -->
              <div class="flex items-center justify-end gap-2 border-t border-[#e8f4fc] bg-gray-50/50 p-3 dark:border-gray-700 dark:bg-gray-900/30">
                <button (click)="visualizarEvidencia(evidencia)"
                  class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-[#1788EF]/10 text-[#1788EF] transition-colors hover:bg-[#1788EF]/20 dark:bg-[#1788EF]/20 dark:hover:bg-[#1788EF]/30"
                  title="Visualizar">
                  <span class="icon-[hugeicons--view] h-5 w-5"></span>
                </button>

                <button *ngIf="evidencia.estado === 'visible'" (click)="descargarEvidencia(evidencia)"
                  class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-[#00A448]/10 text-[#00A448] transition-colors hover:bg-[#00A448]/20 dark:bg-[#00A448]/20 dark:hover:bg-[#00A448]/30"
                  title="Descargar">
                  <span class="icon-[hugeicons--download-04] h-5 w-5"></span>
                </button>

                <button (click)="toggleArchivar(evidencia)"
                  [class]="evidencia.estado === 'visible'
                    ? 'bg-[#f59e0b]/10 text-[#f59e0b] hover:bg-[#f59e0b]/20 dark:bg-[#f59e0b]/20 dark:hover:bg-[#f59e0b]/30'
                    : 'bg-[#00A448]/10 text-[#00A448] hover:bg-[#00A448]/20 dark:bg-[#00A448]/20 dark:hover:bg-[#00A448]/30'"
                  class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full transition-colors"
                  [title]="evidencia.estado === 'visible' ? 'Archivar' : 'Desarchivar'">
                  <span [class]="evidencia.estado === 'visible' ? 'icon-[hugeicons--archive]' : 'icon-[hugeicons--archive-02]'" class="h-5 w-5"></span>
                </button>

                <button *ngIf="evidencia.estado === 'archivada'" (click)="eliminarEvidencia(evidencia)"
                  class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-red-100/60 text-red-500 transition-colors hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50"
                  title="Eliminar">
                  <span class="icon-[hugeicons--delete-02] h-5 w-5"></span>
                </button>
              </div>
            </div>
          </div>

          <!-- Vista de tabla (desktop) -->
          <div class="hidden overflow-hidden rounded-xl border border-[#e8f4fc] sm:block dark:border-gray-700">
            <!-- Contenedor con scroll horizontal y vertical - altura fija de 10 filas -->
            <div class="h-[660px] overflow-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#e8f4fc] hover:scrollbar-thumb-[#d0e8f8] dark:scrollbar-thumb-gray-700 dark:hover:scrollbar-thumb-gray-600">
              <table class="min-w-full divide-y divide-[#e8f4fc] dark:divide-gray-700" style="min-width: 900px;">
                <thead class="sticky top-0 z-20 bg-gray-100 dark:bg-gray-800">
                  <tr>
                    <th class="whitespace-nowrap bg-gray-100 px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] lg:px-6 dark:bg-gray-800 dark:text-gray-400">
                      Archivo
                    </th>
                    <th class="whitespace-nowrap bg-gray-100 px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] lg:px-6 dark:bg-gray-800 dark:text-gray-400">
                      Producto
                    </th>
                    <th class="whitespace-nowrap bg-gray-100 px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] lg:px-6 dark:bg-gray-800 dark:text-gray-400">
                      Modo
                    </th>
                    <th class="whitespace-nowrap bg-gray-100 px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] lg:px-6 dark:bg-gray-800 dark:text-gray-400">
                      Tiempo
                    </th>
                    <th class="w-full whitespace-nowrap bg-gray-100 px-4 py-4 text-left text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] lg:px-6 dark:bg-gray-800 dark:text-gray-400">
                      Fecha
                    </th>
                    <th class="sticky right-0 z-30 whitespace-nowrap bg-gray-100 px-4 py-4 text-right text-xs font-semibold uppercase tracking-wider text-[#4a5d6f] before:pointer-events-none before:absolute before:bottom-0 before:right-full before:top-0 before:w-px before:bg-gray-200 lg:px-6 dark:bg-gray-800 dark:text-gray-400 dark:before:bg-gray-700">
                      Acciones
                    </th>
                  </tr>
                </thead>

                <tbody class="bg-white dark:bg-gray-800">
                  <tr *ngFor="let evidencia of evidenciasPaginadas"
                      class="border-b border-[#e8f4fc] hover:bg-gray-50/50 dark:border-gray-700 dark:hover:bg-gray-700/30">
                    <td class="whitespace-nowrap px-4 py-4 lg:px-6">
                      <div class="flex items-center gap-3">
                        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-[#8b5cf6]/10 dark:bg-[#8b5cf6]/20">
                          <span class="icon-[hugeicons--pdf-01] h-5 w-5 text-[#8b5cf6]"></span>
                        </div>
                        <div class="min-w-0">
                          <p class="max-w-[200px] truncate text-sm font-medium text-[#034D82] dark:text-white">{{ evidencia.nombreSugerido }}</p>
                          <p class="text-xs text-[#4a5d6f] dark:text-gray-400">{{ formatearPeso(evidencia.peso_pdf_kb) }}</p>
                        </div>
                      </div>
                    </td>

                    <td class="whitespace-nowrap px-4 py-4 lg:px-6">
                      <span class="text-sm text-[#034D82] dark:text-gray-200">{{ evidencia.producto_nombre }}</span>
                    </td>

                    <td class="whitespace-nowrap px-4 py-4 lg:px-6">
                      <span [ngClass]="getColorModo(evidencia.modo)" class="inline-flex rounded-full px-3 py-1 text-xs font-medium">
                        {{ evidencia.modo | titlecase }}
                      </span>
                    </td>

                    <td class="whitespace-nowrap px-4 py-4 lg:px-6">
                      <span class="text-sm text-[#4a5d6f] dark:text-gray-300">{{ formatearDuracion(evidencia.tiempo_duracion_segundos) }}</span>
                    </td>

                    <td class="w-full whitespace-nowrap px-4 py-4 lg:px-6">
                      <span class="text-sm text-[#4a5d6f] dark:text-gray-300">{{ formatearFecha(evidencia.fecha_agregado) }}</span>
                    </td>

                    <td class="sticky right-0 z-10 whitespace-nowrap bg-white px-4 py-4 before:pointer-events-none before:absolute before:bottom-0 before:right-full before:top-0 before:w-px before:bg-gray-200 lg:px-6 dark:bg-gray-800 dark:before:bg-gray-700">
                      <div class="flex items-center justify-end gap-2">
                        <button (click)="visualizarEvidencia(evidencia)"
                          class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-[#1788EF]/10 text-[#1788EF] transition-colors hover:bg-[#1788EF]/20 dark:bg-[#1788EF]/20 dark:hover:bg-[#1788EF]/30"
                          title="Visualizar">
                          <span class="icon-[hugeicons--view] h-5 w-5"></span>
                        </button>

                        <button *ngIf="evidencia.estado === 'visible'" (click)="descargarEvidencia(evidencia)"
                          class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-[#00A448]/10 text-[#00A448] transition-colors hover:bg-[#00A448]/20 dark:bg-[#00A448]/20 dark:hover:bg-[#00A448]/30"
                          title="Descargar">
                          <span class="icon-[hugeicons--download-04] h-5 w-5"></span>
                        </button>

                        <button (click)="toggleArchivar(evidencia)"
                          [class]="evidencia.estado === 'visible'
                            ? 'bg-[#f59e0b]/10 text-[#f59e0b] hover:bg-[#f59e0b]/20 dark:bg-[#f59e0b]/20 dark:hover:bg-[#f59e0b]/30'
                            : 'bg-[#00A448]/10 text-[#00A448] hover:bg-[#00A448]/20 dark:bg-[#00A448]/20 dark:hover:bg-[#00A448]/30'"
                          class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full transition-colors"
                          [title]="evidencia.estado === 'visible' ? 'Archivar' : 'Desarchivar'">
                          <span [class]="evidencia.estado === 'visible' ? 'icon-[hugeicons--archive]' : 'icon-[hugeicons--archive-02]'" class="h-5 w-5"></span>
                        </button>

                        <button *ngIf="evidencia.estado === 'archivada'" (click)="eliminarEvidencia(evidencia)"
                          class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-red-100/60 text-red-500 transition-colors hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50"
                          title="Eliminar">
                          <span class="icon-[hugeicons--delete-02] h-5 w-5"></span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Paginación (solo desktop) -->
      <div *ngIf="!cargando && evidenciasFiltradas.length > 0"
        class="hidden border-t border-[#e8f4fc] bg-gray-50/50 px-4 py-4 sm:flex sm:flex-row sm:items-center sm:justify-between sm:px-6 dark:border-gray-700 dark:bg-gray-900/30">
        <!-- Selector de items por página -->
        <div class="flex items-center gap-3">
          <span class="text-sm font-medium text-[#4a5d6f] dark:text-gray-400">Mostrar</span>
          <div class="dropdown dropdown-top dropdown-center" [class.dropdown-open]="isOpen">
            <div tabindex="0" (click)="toggleDropdown()"
              class="flex h-10 min-w-16 cursor-pointer items-center justify-between gap-2 rounded-lg border border-[#e8f4fc] bg-white px-3 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100">
              <span>{{ selectedValue }}</span>
              <span class="icon-[hugeicons--arrow-up-01] h-4 w-4 text-[#4a5d6f]"></span>
            </div>

            <ul tabindex="0"
              class="dropdown-content menu z-10 w-24 rounded-xl border border-[#e8f4fc] bg-white p-2 shadow-lg dark:border-gray-600 dark:bg-gray-700">
              <li><a (click)="selectValue(5, $event)" class="cursor-pointer rounded-lg px-3 py-2 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">5</a></li>
              <li><a (click)="selectValue(10, $event)" class="cursor-pointer rounded-lg px-3 py-2 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">10</a></li>
              <li><a (click)="selectValue(15, $event)" class="cursor-pointer rounded-lg px-3 py-2 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">15</a></li>
              <li><a (click)="selectValue(20, $event)" class="cursor-pointer rounded-lg px-3 py-2 text-sm text-[#034D82] hover:bg-[#8b5cf6]/10 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20">20</a></li>
            </ul>
          </div>
          <span class="text-sm text-[#4a5d6f] dark:text-gray-400">por página</span>
        </div>

        <!-- Navegación de páginas -->
        <div class="flex items-center gap-3">
          <span class="text-sm text-[#4a5d6f] dark:text-gray-400">
            Página <span class="font-semibold text-[#034D82] dark:text-white">{{ paginaActual }}</span> de <span class="font-semibold text-[#034D82] dark:text-white">{{ totalPaginas || 1 }}</span>
          </span>

          <div class="flex items-center gap-2">
            <button (click)="paginaAnterior()" [disabled]="paginaActual === 1"
              [class.opacity-50]="paginaActual === 1"
              [class.cursor-not-allowed]="paginaActual === 1"
              class="flex h-10 cursor-pointer items-center gap-2 rounded-lg border border-[#e8f4fc] bg-white px-4 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] hover:bg-[#8b5cf6]/5 disabled:hover:border-[#e8f4fc] disabled:hover:bg-white dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20 dark:disabled:hover:bg-gray-700">
              <span class="icon-[hugeicons--arrow-left-01] h-4 w-4"></span>
              <span class="hidden sm:inline">Anterior</span>
            </button>

            <button (click)="paginaSiguiente()" [disabled]="paginaActual === totalPaginas"
              [class.opacity-50]="paginaActual === totalPaginas"
              [class.cursor-not-allowed]="paginaActual === totalPaginas"
              class="flex h-10 cursor-pointer items-center gap-2 rounded-lg border border-[#e8f4fc] bg-white px-4 text-sm font-medium text-[#034D82] shadow-sm transition-all hover:border-[#8b5cf6] hover:bg-[#8b5cf6]/5 disabled:hover:border-[#e8f4fc] disabled:hover:bg-white dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-[#8b5cf6]/20 dark:disabled:hover:bg-gray-700">
              <span class="hidden sm:inline">Siguiente</span>
              <span class="icon-[hugeicons--arrow-right-01] h-4 w-4"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Modal PDF -->
<div *ngIf="mostrarModalPdf"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm transition-all duration-300 dark:bg-black/75 cursor-pointer"
  (click)="cerrarModalPdf()">
  <div
    class="flex h-[90vh] w-full max-w-6xl flex-col overflow-hidden rounded-2xl border border-[#e8f4fc] bg-white shadow-2xl transition-all duration-300 dark:border-gray-700 dark:bg-gray-800 cursor-default"
    (click)="$event.stopPropagation()">
    <!-- Header del modal -->
    <div class="relative flex items-center justify-between border-b border-[#e8f4fc] px-4 py-4 sm:px-6 dark:border-gray-700">
      <!-- Decoración de fondo -->
      <div class="absolute inset-0 bg-linear-to-r from-[#8b5cf6]/5 via-transparent to-[#1788EF]/5 dark:from-[#8b5cf6]/10 dark:to-[#1788EF]/10"></div>

      <div class="relative z-10 flex min-w-0 flex-1 items-center gap-3">
        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-[#8b5cf6]/10 sm:h-12 sm:w-12 dark:bg-[#8b5cf6]/20">
          <span class="icon-[hugeicons--pdf-01] h-5 w-5 text-[#8b5cf6] sm:h-6 sm:w-6"></span>
        </div>
        <div class="min-w-0 flex-1">
          <h3 class="truncate text-base font-semibold text-[#034D82] sm:text-lg dark:text-white">
            {{ nombreArchivoPdf }}
          </h3>
          <p class="text-xs text-[#4a5d6f] sm:text-sm dark:text-gray-400">Documento PDF</p>
        </div>
      </div>

      <button (click)="cerrarModalPdf()"
        class="relative z-10 flex h-10 w-10 shrink-0 cursor-pointer items-center justify-center rounded-full bg-gray-100 text-[#4a5d6f] transition-all duration-200 hover:bg-red-100 hover:text-red-500 focus:ring-2 focus:ring-[#8b5cf6]/50 focus:outline-none dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-red-900/30 dark:hover:text-red-400">
        <span class="icon-[hugeicons--cancel-01] h-5 w-5"></span>
      </button>
    </div>

    <!-- Contenido del modal -->
    <div class="flex-1 overflow-hidden bg-gray-50/50 dark:bg-gray-900/50">
      <div *ngIf="cargandoPdf" class="flex h-full flex-col items-center justify-center gap-4">
        <div class="relative">
          <div class="h-16 w-16 animate-spin rounded-full border-4 border-[#e8f4fc] border-t-[#8b5cf6] dark:border-gray-700 dark:border-t-[#8b5cf6]"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="icon-[hugeicons--pdf-01] h-6 w-6 text-[#8b5cf6]"></span>
          </div>
        </div>
        <p class="text-sm font-medium text-[#4a5d6f] dark:text-gray-400">Cargando documento...</p>
      </div>

      <div *ngIf="!cargandoPdf && pdfSrc" class="h-full">
        <ng2-pdfjs-viewer [pdfSrc]="pdfSrc" [viewerFolder]="'assets/pdfjs'" [urlValidation]="false" [download]="false"
          [print]="false" [openFile]="false" [viewBookmark]="false" [zoom]="'page-width'"
          class="h-full overflow-hidden"></ng2-pdfjs-viewer>
      </div>
    </div>

    <!-- Footer del modal -->
    <div class="relative flex flex-col gap-3 border-t border-[#e8f4fc] px-4 py-4 sm:flex-row sm:items-center sm:justify-between sm:px-6 dark:border-gray-700">
      <!-- Decoración de fondo -->
      <div class="absolute inset-0 bg-linear-to-r from-gray-50 via-white to-gray-50 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800"></div>

      <div class="relative z-10 flex items-center gap-2">
        <span class="icon-[hugeicons--file-validation] h-4 w-4 text-[#4a5d6f] dark:text-gray-400"></span>
        <p class="text-sm text-[#4a5d6f] dark:text-gray-400">Evidencia de simulación</p>
      </div>

      <div class="relative z-10 flex items-center gap-3">
        <button *ngIf="evidenciaEnModalEstado === 'visible'" (click)="descargarPdfModal()" [disabled]="cargandoPdf"
          class="flex flex-1 cursor-pointer items-center justify-center gap-2 rounded-full bg-[#00A448] px-5 py-2.5 text-sm font-medium text-white shadow-md shadow-[#00A448]/25 transition-all duration-200 hover:bg-[#008a3a] hover:shadow-lg focus:ring-2 focus:ring-[#00A448]/50 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 sm:flex-none dark:shadow-[#00A448]/20 dark:focus:ring-offset-gray-800"
          title="Descargar">
          <span class="icon-[hugeicons--download-04] h-5 w-5"></span>
          <span>Descargar</span>
        </button>

        <button (click)="cerrarModalPdf()"
          class="flex flex-1 cursor-pointer items-center justify-center gap-2 rounded-full border border-[#e8f4fc] bg-white px-5 py-2.5 text-sm font-medium text-[#034D82] shadow-sm transition-all duration-200 hover:bg-gray-50 focus:ring-2 focus:ring-gray-400/50 focus:ring-offset-2 focus:outline-none sm:flex-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 dark:focus:ring-offset-gray-800">
          <span class="icon-[hugeicons--cancel-01] h-5 w-5"></span>
          <span>Cerrar</span>
        </button>
      </div>
    </div>
  </div>
</div>
